<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Suri Cosméticos</title>
  <style>
    body { font-family: Arial, sans-serif; background: #ffe6f0; margin: 0; padding: 0; }
    header { background: #ff4d94; color: white; padding: 15px; text-align: center; }
    nav { display: flex; justify-content: center; background: #ff80bf; }
    nav button { background: none; border: none; padding: 15px; font-size: 16px; cursor: pointer; color: white; }
    nav button.active { background: #ff4d94; font-weight: bold; }
    section { display: none; padding: 20px; }
    section.active { display: block; }
    input, select, button { margin: 5px 0; padding: 8px; width: 100%; max-width: 400px; }
    ul { list-style: none; padding: 0; }
    li { background: #fff; margin: 5px 0; padding: 10px; border-radius: 5px; }
  </style>
</head>
<body>
  <header><h1>Suri Cosméticos</h1></header>
  <nav>
    <button onclick="mostrarAba('produtos')" id="btnProdutos">Produtos</button>
    <button onclick="mostrarAba('clientes')" id="btnClientes">Clientes</button>
    <button onclick="mostrarAba('entradas')" id="btnEntradas">Entradas</button>
    <button onclick="mostrarAba('vendas')" id="btnVendas">Vendas</button>
  </nav>

  <!-- Produtos -->
  <section id="produtos">
    <h2>Cadastro de Produtos</h2>
    <input id="nomeProduto" placeholder="Nome do Produto">
    <input id="descricaoProduto" placeholder="Descrição">
    <input id="precoProduto" type="number" step="0.01" placeholder="Preço Unitário">
    <input id="marcaProduto" placeholder="Marca">
    <button onclick="salvarProduto()">Salvar Produto</button>
    <h3>Lista de Produtos</h3>
    <ul id="listaProdutos"></ul>
  </section>

  <!-- Clientes -->
  <section id="clientes">
    <h2>Cadastro de Clientes</h2>
    <input id="nomeCliente" placeholder="Nome do Cliente">
    <input id="telefoneCliente" placeholder="Telefone">
    <input id="emailCliente" placeholder="E-mail">
    <button onclick="salvarCliente()">Salvar Cliente</button>
    <h3>Lista de Clientes</h3>
    <ul id="listaClientes"></ul>
  </section>

  <!-- Entradas -->
  <section id="entradas">
    <h2>Entrada de Material</h2>
    <select id="produtoEntrada"></select>
    <input id="quantidadeEntrada" type="number" placeholder="Quantidade">
    <input id="valorEntrada" type="number" step="0.01" placeholder="Valor Unitário">
    <input id="dataEntrada" type="date">
    <button onclick="salvarEntrada()">Registrar Entrada</button>
    <h3>Estoque</h3>
    <ul id="listaEstoque"></ul>
  </section>

  <!-- Vendas -->
  <section id="vendas">
    <h2>Registrar Venda</h2>
    <select id="clienteVenda"></select>
    <select id="produtoVenda"></select>
    <input id="quantidadeVenda" type="number" placeholder="Quantidade">
    <input id="formaPagamento" placeholder="Forma de Pagamento (ex: Pix, Cartão)">
    <input id="parcelas" type="number" placeholder="Nº de Parcelas (1 = à vista)">
    <button onclick="salvarVenda()">Registrar Venda</button>
    <h3>Lista de Vendas</h3>
    <ul id="listaVendas"></ul>
  </section>

  <script>
    let produtos = JSON.parse(localStorage.getItem("produtos")) || [];
    let clientes = JSON.parse(localStorage.getItem("clientes")) || [];
    let vendas = JSON.parse(localStorage.getItem("vendas")) || [];

    // Abas
    function mostrarAba(aba) {
      document.querySelectorAll("section").forEach(sec => sec.classList.remove("active"));
      document.querySelectorAll("nav button").forEach(btn => btn.classList.remove("active"));
      document.getElementById(aba).classList.add("active");
      document.getElementById("btn" + aba.charAt(0).toUpperCase() + aba.slice(1)).classList.add("active");
    }

    // Produtos
    function salvarProduto() {
      const nome = document.getElementById("nomeProduto").value;
      const descricao = document.getElementById("descricaoProduto").value;
      const preco = parseFloat(document.getElementById("precoProduto").value);
      const marca = document.getElementById("marcaProduto").value;

      if (nome && preco) {
        produtos.push({ nome, descricao, preco, marca, entradas: [] });
        localStorage.setItem("produtos", JSON.stringify(produtos));
        listarProdutos();
        atualizarProdutosVenda();
        atualizarProdutosEntrada();

        // limpar
        document.getElementById("nomeProduto").value = "";
        document.getElementById("descricaoProduto").value = "";
        document.getElementById("precoProduto").value = "";
        document.getElementById("marcaProduto").value = "";
      }
    }

    function listarProdutos() {
      const lista = document.getElementById("listaProdutos");
      lista.innerHTML = "";
      produtos.forEach((p, i) => {
        const li = document.createElement("li");
        li.textContent = `${p.nome} - ${p.marca} (R$${p.preco.toFixed(2)})`;
        lista.appendChild(li);
      });
    }

    // Clientes
    function salvarCliente() {
      const nome = document.getElementById("nomeCliente").value;
      const telefone = document.getElementById("telefoneCliente").value;
      const email = document.getElementById("emailCliente").value;

      if (nome) {
        clientes.push({ nome, telefone, email });
        localStorage.setItem("clientes", JSON.stringify(clientes));
        listarClientes();
        atualizarClientesVenda();

        // limpar
        document.getElementById("nomeCliente").value = "";
        document.getElementById("telefoneCliente").value = "";
        document.getElementById("emailCliente").value = "";
      }
    }

    function listarClientes() {
      const lista = document.getElementById("listaClientes");
      lista.innerHTML = "";
      clientes.forEach((c, i) => {
        const li = document.createElement("li");
        li.textContent = `${c.nome} - ${c.telefone}`;
        lista.appendChild(li);
      });
    }

    // Entradas
    function salvarEntrada() {
      const produtoIndex = document.getElementById("produtoEntrada").value;
      const quantidade = parseInt(document.getElementById("quantidadeEntrada").value);
      const valor = parseFloat(document.getElementById("valorEntrada").value);
      const data = document.getElementById("dataEntrada").value;

      if (produtoIndex !== "" && quantidade > 0) {
        produtos[produtoIndex].entradas.push({ quantidade, valor, data });
        localStorage.setItem("produtos", JSON.stringify(produtos));
        listarEstoque();

        // limpar
        document.getElementById("quantidadeEntrada").value = "";
        document.getElementById("valorEntrada").value = "";
        document.getElementById("dataEntrada").value = "";
      }
    }

    function listarEstoque() {
      const lista = document.getElementById("listaEstoque");
      lista.innerHTML = "";
      produtos.forEach(p => {
        const total = p.entradas.reduce((sum, e) => sum + e.quantidade, 0);
        const li = document.createElement("li");
        li.textContent = `${p.nome} - Estoque: ${total}`;
        lista.appendChild(li);
      });
    }

    // Vendas
    function salvarVenda() {
      const clienteIndex = document.getElementById("clienteVenda").value;
      const produtoIndex = document.getElementById("produtoVenda").value;
      const quantidade = parseInt(document.getElementById("quantidadeVenda").value);
      const formaPagamento = document.getElementById("formaPagamento").value;
      const parcelas = parseInt(document.getElementById("parcelas").value) || 1;

      if (clienteIndex !== "" && produtoIndex !== "" && quantidade > 0) {
        const cliente = clientes[clienteIndex];
        const produto = produtos[produtoIndex];
        const total = quantidade * produto.preco;

        vendas.push({ cliente: cliente.nome, produto: produto.nome, quantidade, total, formaPagamento, parcelas });
        localStorage.setItem("vendas", JSON.stringify(vendas));
        listarVendas();

        // limpar
        document.getElementById("quantidadeVenda").value = "";
        document.getElementById("formaPagamento").value = "";
        document.getElementById("parcelas").value = "";
      }
    }

    function listarVendas() {
      const lista = document.getElementById("listaVendas");
      lista.innerHTML = "";
      vendas.forEach(v => {
        const li = document.createElement("li");
        li.textContent = `${v.cliente} comprou ${v.quantidade}x ${v.produto} - Total R$${v.total.toFixed(2)} - ${v.formaPagamento} (${v.parcelas}x)`;
        lista.appendChild(li);
      });
    }

    // Atualização de selects
    function atualizarProdutosVenda() {
      const select = document.getElementById("produtoVenda");
      select.innerHTML = "<option value=''>Selecione o produto</option>";
      produtos.forEach((p, i) => {
        const option = document.createElement("option");
        option.value = i;
        option.textContent = p.nome;
        select.appendChild(option);
      });
    }

    function atualizarClientesVenda() {
      const select = document.getElementById("clienteVenda");
      select.innerHTML = "<option value=''>Selecione o cliente</option>";
      clientes.forEach((c, i) => {
        const option = document.createElement("option");
        option.value = i;
        option.textContent = c.nome;
        select.appendChild(option);
      });
    }

    function atualizarProdutosEntrada() {
      const select = document.getElementById("produtoEntrada");
      select.innerHTML = "<option value=''>Selecione o produto</option>";
      produtos.forEach((p, i) => {
        const option = document.createElement("option");
        option.value = i;
        option.textContent = p.nome;
        select.appendChild(option);
      });
    }

    // Inicialização
    listarProdutos();
    listarClientes();
    listarEstoque();
    listarVendas();
    atualizarProdutosVenda();
    atualizarClientesVenda();
    atualizarProdutosEntrada();

    mostrarAba("produtos"); // abre a aba produtos ao carregar
  </script>
</body>
</html>
