<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Suri Cosméticos</title>
  <style>
    body { font-family: Arial, sans-serif; background-color: #f8c8dc; margin: 0; padding: 0; }
    header { background-color: #f06292; padding: 15px; text-align: center; color: white; font-size: 24px; font-weight: bold; }
    nav { text-align: center; margin: 20px; }
    nav button { margin: 0 10px; padding: 10px 20px; background-color: white; border: 1px solid #f06292; border-radius: 5px; cursor: pointer; font-weight: bold; color: #f06292; }
    nav button:hover { background-color: #f06292; color: white; }
    .aba { display: none; padding: 20px; }
    .ativa { display: block; }
    table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    th, td { border: 1px solid #f06292; padding: 8px; text-align: center; }
    th { background-color: #f48fb1; color: white; }
    input, textarea, select { width: 100%; padding: 8px; margin: 5px 0; border: 1px solid #ccc; border-radius: 5px; }
    button.salvar { background-color: #f06292; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; margin-top: 10px; }
    button.salvar:hover { background-color: #ec407a; }
    .total-vendas { font-size: 18px; font-weight: bold; margin-top: 15px; color: #880e4f; }
  </style>
</head>
<body>
  <header>Suri Cosméticos</header>

  <nav>
    <button onclick="mostrarAba('produtos')">Produtos</button>
    <button onclick="mostrarAba('clientes')">Clientes</button>
    <button onclick="mostrarAba('vendas')">Vendas</button>
  </nav>

  <!-- Produtos -->
  <div id="produtos" class="aba ativa">
    <h2>Cadastro de Produtos</h2>
    <input type="text" id="nomeProduto" placeholder="Nome do produto">
    <textarea id="descricaoProduto" placeholder="Descrição"></textarea>
    <input type="number" id="precoProduto" placeholder="Preço">
    <input type="number" id="estoqueProduto" placeholder="Estoque">
    <input type="text" id="marcaProduto" placeholder="Marca">
    <button class="salvar" onclick="salvarProduto()">Salvar Produto</button>

    <h3>Lista de Produtos</h3>
    <table>
      <thead>
        <tr>
          <th>Nome</th>
          <th>Descrição</th>
          <th>Preço</th>
          <th>Estoque</th>
          <th>Marca</th>
          <th>Entrada</th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody id="listaProdutos"></tbody>
    </table>
  </div>

  <!-- Clientes -->
  <div id="clientes" class="aba">
    <h2>Cadastro de Clientes</h2>
    <input type="text" id="nomeCliente" placeholder="Nome completo">
    <input type="text" id="telefoneCliente" placeholder="Telefone">
    <input type="email" id="emailCliente" placeholder="Email">
    <button class="salvar" onclick="salvarCliente()">Salvar Cliente</button>

    <h3>Lista de Clientes</h3>
    <table>
      <thead>
        <tr>
          <th>Nome</th>
          <th>Telefone</th>
          <th>Email</th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody id="listaClientes"></tbody>
    </table>
  </div>

  <!-- Vendas -->
  <div id="vendas" class="aba">
    <h2>Registrar Venda</h2>
    <select id="clienteVenda"></select>
    <select id="produtoVenda"></select>
    <input type="number" id="quantidadeVenda" placeholder="Quantidade">
    <button class="salvar" onclick="registrarVenda()">Registrar Venda</button>

    <h3>Histórico de Vendas</h3>
    <ul id="listaVendas"></ul>
    <div class="total-vendas">Total de Vendas: R$ <span id="totalVendas">0,00</span></div>
  </div>

  <script>
    let produtos = JSON.parse(localStorage.getItem('produtos')) || [];
    let clientes = JSON.parse(localStorage.getItem('clientes')) || [];
    let vendas = JSON.parse(localStorage.getItem('vendas')) || [];
    const senhaExclusao = "1234";

    function mostrarAba(aba) {
      document.querySelectorAll('.aba').forEach(div => div.classList.remove('ativa'));
      document.getElementById(aba).classList.add('ativa');
      listarProdutos();
      listarClientes();
      listarVendas();
      atualizarSelects();
    }

    // Produtos
    function salvarProduto() {
      const nome = document.getElementById("nomeProduto").value;
      const descricao = document.getElementById("descricaoProduto").value;
      const preco = parseFloat(document.getElementById("precoProduto").value);
      const estoque = parseInt(document.getElementById("estoqueProduto").value);
      const marca = document.getElementById("marcaProduto").value;
      const entrada = new Date().toLocaleDateString();

      if (nome && !isNaN(preco) && !isNaN(estoque)) {
        produtos.push({ nome, descricao, preco, estoque, marca, entrada });
        localStorage.setItem("produtos", JSON.stringify(produtos));
        listarProdutos();
        atualizarSelects();
        limparCamposProduto();
      } else {
        alert("Preencha nome, preço e estoque corretamente!");
      }
    }

    function listarProdutos() {
      const tbody = document.getElementById("listaProdutos");
      tbody.innerHTML = "";
      produtos.forEach((p, i) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${p.nome}</td>
          <td>${p.descricao}</td>
          <td>R$${p.preco.toFixed(2)}</td>
          <td>${p.estoque}</td>
          <td>${p.marca}</td>
          <td>${p.entrada}</td>
          <td><button onclick="alterarProduto(${i})">Alterar</button></td>
        `;
        tbody.appendChild(tr);
      });
    }

    function limparCamposProduto() {
      document.getElementById("nomeProduto").value = "";
      document.getElementById("descricaoProduto").value = "";
      document.getElementById("precoProduto").value = "";
      document.getElementById("estoqueProduto").value = "";
      document.getElementById("marcaProduto").value = "";
    }

    // Clientes
    function salvarCliente() {
      const nome = document.getElementById("nomeCliente").value;
      const telefone = document.getElementById("telefoneCliente").value;
      const email = document.getElementById("emailCliente").value;

      if (nome) {
        clientes.push({ nome, telefone, email });
        localStorage.setItem("clientes", JSON.stringify(clientes));
        listarClientes();
        atualizarSelects();
        limparCamposCliente();
      } else {
        alert("Preencha o nome do cliente!");
      }
    }

    function listarClientes() {
      const tbody = document.getElementById("listaClientes");
      tbody.innerHTML = "";
      clientes.forEach((c, i) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${c.nome}</td>
          <td>${c.telefone}</td>
          <td>${c.email}</td>
          <td><button onclick="alterarCliente(${i})">Alterar</button></td>
        `;
        tbody.appendChild(tr);
      });
    }

    function limparCamposCliente() {
      document.getElementById("nomeCliente").value = "";
      document.getElementById("telefoneCliente").value = "";
      document.getElementById("emailCliente").value = "";
    }

    // Vendas
    function registrarVenda() {
      const clienteIndex = document.getElementById("clienteVenda").value;
      const produtoIndex = document.getElementById("produtoVenda").value;
      const quantidade = parseInt(document.getElementById("quantidadeVenda").value);

      if (clienteIndex === "" || produtoIndex === "" || isNaN(quantidade) || quantidade <= 0) {
        alert("Preencha todos os campos corretamente!");
        return;
      }

      const cliente = clientes[clienteIndex].nome;
      const produto = produtos[produtoIndex].nome;
      const preco = produtos[produtoIndex].preco;

      if (produtos[produtoIndex].estoque < quantidade) {
        alert("Estoque insuficiente!");
        return;
      }

      const total = preco * quantidade;
      const data = new Date().toLocaleString();

      produtos[produtoIndex].estoque -= quantidade;
      vendas.push({ cliente, produto, quantidade, total, data });
      localStorage.setItem("produtos", JSON.stringify(produtos));
      localStorage.setItem("vendas", JSON.stringify(vendas));

      listarProdutos();
      listarVendas();
      atualizarSelects();
      document.getElementById("quantidadeVenda").value = "";
    }

    function listarVendas() {
      const lista = document.getElementById("listaVendas");
      const totalVendasEl = document.getElementById("totalVendas");
      lista.innerHTML = "";
      let soma = 0;

      vendas.forEach((v, i) => {
        soma += v.total;
        const li = document.createElement("li");
        li.innerHTML = `
          ${v.data} - ${v.cliente} comprou ${v.quantidade} x ${v.produto} - Total: R$${v.total.toFixed(2)}
          <button onclick="excluirVenda(${i})">Excluir</button>
        `;
        lista.appendChild(li);
      });

      totalVendasEl.textContent = soma.toFixed(2);
    }

    function excluirVenda(i) {
      const senha = prompt("Digite a senha para excluir (padrão 1234):");
      if (senha === senhaExclusao) {
        vendas.splice(i, 1);
        localStorage.setItem("vendas", JSON.stringify(vendas));
        listarVendas();
        listarProdutos();
      } else {
        alert("Senha incorreta!");
      }
    }

    // Atualizar selects
    function atualizarSelects() {
      const selectCliente = document.getElementById("clienteVenda");
      const selectProduto = document.getElementById("produtoVenda");

      selectCliente.innerHTML = "";
      clientes.forEach((c, i) => {
        const option = document.createElement("option");
        option.value = i;
        option.textContent = c.nome;
        selectCliente.appendChild(option);
      });

      selectProduto.innerHTML = "";
      produtos.forEach((p, i) => {
        const option = document.createElement("option");
        option.value = i;
        option.textContent = p.nome;
        selectProduto.appendChild(option);
      });
    }

    // Inicializar
    listarProdutos();
    listarClientes();
    listarVendas();
    atualizarSelects();
  </script>
</body>
</html>
