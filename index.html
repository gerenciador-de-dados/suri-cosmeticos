<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Suri Cosméticos</title>
  <style>
    body { font-family: Arial, sans-serif; background-color: #ffe4ec; margin:0; padding:0; }
    header { background:#ff66a3; color:white; padding:15px; text-align:center; font-size:24px; font-weight:bold; }
    nav { display:flex; justify-content:center; background:#ff99bb; padding:10px; }
    nav button { margin:0 10px; padding:10px 20px; border:none; background:white; color:#ff3399; font-weight:bold; border-radius:5px; cursor:pointer; }
    nav button:hover { background:#ffe6f0; }
    section { display:none; padding:20px; }
    section.active { display:block; }
    form input, form textarea, form select { display:block; margin:10px 0; padding:8px; width:100%; max-width:400px; }
    form button { background:#ff3399; color:white; border:none; padding:10px 20px; cursor:pointer; border-radius:5px; }
    table { width:100%; max-width:900px; border-collapse:collapse; margin-top:20px; }
    table, th, td { border:1px solid #ff99bb; }
    th, td { padding:10px; text-align:left; }
    .btn-editar { background:#ff66a3; color:white; border:none; padding:5px 10px; cursor:pointer; border-radius:4px; }
    .totalBox { margin-top:15px; font-weight:bold; font-size:18px; color:#b30059; }
  </style>
</head>
<body>
  <header>Suri Cosméticos</header>
  <nav>
    <button onclick="mostrarAba('produtos')">Produtos</button>
    <button onclick="mostrarAba('clientes')">Clientes</button>
    <button onclick="mostrarAba('vendas')">Vendas</button>
  </nav>

  <!-- Produtos -->
  <section id="produtos" class="active">
    <h2>Cadastro de Produtos</h2>
    <form id="formProduto">
      <input type="text" id="nomeProduto" placeholder="Nome do produto" required>
      <textarea id="descricaoProduto" placeholder="Descrição"></textarea>
      <input type="number" id="precoProduto" placeholder="Preço" required>
      <input type="number" id="estoqueProduto" placeholder="Estoque" required>
      <input type="text" id="marcaProduto" placeholder="Marca">
      <button type="button" onclick="salvarProduto()">Salvar Produto</button>
    </form>
    <h3>Lista de Produtos</h3>
    <table>
      <thead>
        <tr><th>Nome</th><th>Descrição</th><th>Preço</th><th>Estoque</th><th>Marca</th><th>Entrada</th><th>Ações</th></tr>
      </thead>
      <tbody id="listaProdutos"></tbody>
    </table>
  </section>

  <!-- Clientes -->
  <section id="clientes">
    <h2>Cadastro de Clientes</h2>
    <form id="formCliente">
      <input type="text" id="nomeCliente" placeholder="Nome do cliente" required>
      <input type="tel" id="telefoneCliente" placeholder="Telefone">
      <input type="email" id="emailCliente" placeholder="E-mail">
      <button type="button" onclick="salvarCliente()">Salvar Cliente</button>
    </form>
    <h3>Lista de Clientes</h3>
    <table>
      <thead>
        <tr><th>Nome</th><th>Telefone</th><th>Email</th><th>Ações</th></tr>
      </thead>
      <tbody id="listaClientes"></tbody>
    </table>
  </section>

  <!-- Vendas -->
  <section id="vendas">
    <h2>Simulação de Vendas</h2>
    <form id="formVenda">
      <select id="selectCliente" required></select>
      <select id="selectProduto" required></select>
      <input type="number" id="quantidadeVenda" placeholder="Quantidade" required>
      <button type="button" onclick="registrarVenda()">Registrar Venda</button>
    </form>
    <h3>Histórico de Vendas</h3>
    <table>
      <thead>
        <tr><th>Data</th><th>Cliente</th><th>Produto</th><th>Qtd</th><th>Preço Unitário</th><th>Total</th></tr>
      </thead>
      <tbody id="listaVendas"></tbody>
    </table>
    <div id="totalVendas" class="totalBox"></div>
  </section>

  <script>
    let editarProdutoIndex = null;
    let editarClienteIndex = null;

    function mostrarAba(aba) {
      document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
      document.getElementById(aba).classList.add('active');
      atualizarSelects();
    }

    // Produtos
    function salvarProduto() {
      const nome = document.getElementById('nomeProduto').value;
      const descricao = document.getElementById('descricaoProduto').value;
      const preco = parseFloat(document.getElementById('precoProduto').value) || 0;
      const estoque = parseInt(document.getElementById('estoqueProduto').value) || 0;
      const marca = document.getElementById('marcaProduto').value;

      if(!nome || preco <= 0) { alert('Preencha pelo menos o nome e um preço válido!'); return; }

      let produtos = JSON.parse(localStorage.getItem('produtos')) || [];
      const dataAgora = new Date().toLocaleDateString('pt-BR');

      if(editarProdutoIndex !== null) {
        produtos[editarProdutoIndex] = {...produtos[editarProdutoIndex], nome, descricao, preco, estoque, marca};
        editarProdutoIndex = null;
      } else {
        produtos.push({nome, descricao, preco, estoque, marca, dataEntrada: dataAgora});
      }
      localStorage.setItem('produtos', JSON.stringify(produtos));
      document.getElementById('formProduto').reset();
      listarProdutos();
      atualizarSelects();
    }

    function listarProdutos() {
      let produtos = JSON.parse(localStorage.getItem('produtos')) || [];
      let lista = document.getElementById('listaProdutos');
      lista.innerHTML = '';
      produtos.forEach((p, i) => {
        lista.innerHTML += `<tr>
          <td>${p.nome}</td>
          <td>${p.descricao}</td>
          <td>R$ ${p.preco.toFixed(2)}</td>
          <td>${p.estoque}</td>
          <td>${p.marca}</td>
          <td>${p.dataEntrada || "-"}</td>
          <td><button class="btn-editar" onclick="editarProduto(${i})">Alterar</button></td>
        </tr>`;
      });
    }

    function editarProduto(i) {
      let produtos = JSON.parse(localStorage.getItem('produtos')) || [];
      let p = produtos[i];
      document.getElementById('nomeProduto').value = p.nome;
      document.getElementById('descricaoProduto').value = p.descricao;
      document.getElementById('precoProduto').value = p.preco;
      document.getElementById('estoqueProduto').value = p.estoque;
      document.getElementById('marcaProduto').value = p.marca;
      editarProdutoIndex = i;
      mostrarAba('produtos');
    }

    // Clientes
    function salvarCliente() {
      const nome = document.getElementById('nomeCliente').value;
      const telefone = document.getElementById('telefoneCliente').value;
      const email = document.getElementById('emailCliente').value;

      if(!nome) { alert('Preencha pelo menos o nome do cliente!'); return; }

      let clientes = JSON.parse(localStorage.getItem('clientes')) || [];
      if(editarClienteIndex !== null) {
        clientes[editarClienteIndex] = {nome, telefone, email};
        editarClienteIndex = null;
      } else {
        clientes.push({nome, telefone, email});
      }
      localStorage.setItem('clientes', JSON.stringify(clientes));
      document.getElementById('formCliente').reset();
      listarClientes();
      atualizarSelects();
    }

    function listarClientes() {
      let clientes = JSON.parse(localStorage.getItem('clientes')) || [];
      let lista = document.getElementById('listaClientes');
      lista.innerHTML = '';
      clientes.forEach((c, i) => {
        lista.innerHTML += `<tr>
          <td>${c.nome}</td>
          <td>${c.telefone}</td>
          <td>${c.email}</td>
          <td><button class="btn-editar" onclick="editarCliente(${i})">Alterar</button></td>
        </tr>`;
      });
    }

    function editarCliente(i) {
      let clientes = JSON.parse(localStorage.getItem('clientes')) || [];
      let c = clientes[i];
      document.getElementById('nomeCliente').value = c.nome;
      document.getElementById('telefoneCliente').value = c.telefone;
      document.getElementById('emailCliente').value = c.email;
      editarClienteIndex = i;
      mostrarAba('clientes');
    }

    // Vendas
    function registrarVenda() {
      const clienteIndex = document.getElementById('selectCliente').value;
      const produtoIndex = document.getElementById('selectProduto').value;
      const quantidade = parseInt(document.getElementById('quantidadeVenda').value);

      if(clienteIndex === "" || produtoIndex === "" || !quantidade || quantidade <= 0) {
        alert('Preencha todos os campos corretamente!');
        return;
      }

      let produtos = JSON.parse(localStorage.getItem('produtos')) || [];
      let clientes = JSON.parse(localStorage.getItem('clientes')) || [];

      if(quantidade > produtos[produtoIndex].estoque) {
        alert('Quantidade maior que o estoque disponível!');
        return;
      }

      let vendas = JSON.parse(localStorage.getItem('vendas')) || [];
      const dataVenda = new Date().toLocaleString('pt-BR');
      const venda = {
        cliente: clientes[clienteIndex].nome,
        produto: produtos[produtoIndex].nome,
        quantidade,
        precoUnitario: produtos[produtoIndex].preco,
        total: produtos[produtoIndex].preco * quantidade,
        dataVenda
      };

      vendas.push(venda);
      localStorage.setItem('vendas', JSON.stringify(vendas));

      produtos[produtoIndex].estoque = parseInt(produtos[produtoIndex].estoque) - quantidade;
      localStorage.setItem('produtos', JSON.stringify(produtos));

      document.getElementById('formVenda').reset();
      listarVendas();
      listarProdutos();
      atualizarSelects();
    }

    function listarVendas() {
      let vendas = JSON.parse(localStorage.getItem('vendas')) || [];
      let lista = document.getElementById('listaVendas');
      lista.innerHTML = '';
      vendas.forEach(v => {
        lista.innerHTML += `<tr>
          <td>${v.dataVenda}</td>
          <td>${v.cliente}</td>
          <td>${v.produto}</td>
          <td>${v.quantidade}</td>
          <td>R$ ${v.precoUnitario.toFixed(2)}</td>
          <td>R$ ${v.total.toFixed(2)}</td>
        </tr>`;
      });

      let totalGeral = vendas.reduce((soma, v) => soma + v.total, 0);
      document.getElementById('totalVendas').innerText = "Total vendido: R$ " + totalGeral.toFixed(2);
    }

    function atualizarSelects() {
      let clientes = JSON.parse(localStorage.getItem('clientes')) || [];
      let produtos = JSON.parse(localStorage.getItem('produtos')) || [];
      let selectCliente = document.getElementById('selectCliente');
      let selectProduto = document.getElementById('selectProduto');

      selectCliente.innerHTML = '<option value="">Selecione um cliente</option>';
      clientes.forEach((c, i) => {
        selectCliente.innerHTML += `<option value="${i}">${c.nome}</option>`;
      });

      selectProduto.innerHTML = '<option value="">Selecione um produto</option>';
      produtos.forEach((p, i) => {
        selectProduto.innerHTML += `<option value="${i}">${p.nome} (Estoque: ${p.estoque})</option>`;
      });
    }

    // Inicialização
    listarProdutos();
    listarClientes();
    listarVendas();
    atualizarSelects();
  </script>
</body>
</html>
 = `${v.cliente} comprou ${v.quantidade} x ${v.produto} - Total: R$${v.total.toFixed(2)}`;
      lista.appendChild(li);
    });
  }

  // Inicializar
  listarProdutos();
  listarClientes();
  listarVendas();
</script>

</body>
</html>
