<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Suri Cosméticos</title>
<style>
body { font-family: Arial, sans-serif; background: #ffe6f0; margin:0; padding:0;}
header { background:#ff4d6d; color:white; padding:15px; text-align:center;}
nav { display:flex; justify-content:space-around; background:#ccc; flex-wrap:wrap;}
nav button { padding:10px 20px; border:none; background:#ccc; cursor:pointer; font-weight:bold; margin:6px;}
nav button.active { background:#ff4d6d; color:white;}
section { display:none; padding:20px;}
section.active { display:block;}
table { width:100%; border-collapse: collapse; margin-top:10px;}
table, th, td { border:1px solid #999;}
th, td { padding:8px; text-align:left;}
input, select { padding:5px; margin:5px 0; width:100%; box-sizing:border-box;}
button.action-btn { margin:2px; padding:5px 10px; cursor:pointer; border:none; border-radius:4px;}
.btn-alterar { background-color:#ffa500; color:white;}
.btn-excluir { background-color:#ff0000; color:white;}
.btn-status { padding:3px 6px; border-radius:4px; color:white; font-weight:bold; cursor:pointer; border:none;}
.small { width:auto; display:inline-block;}
.row { display:grid; grid-template-columns:1fr 1fr; gap:8px; align-items:end;}
.filtro-btns button { margin-right:5px; font-weight:bold; cursor:pointer; padding:5px 10px; border-radius:4px; border:none;}
@media(max-width:600px){ .row{ grid-template-columns:1fr;} nav{justify-content:center;} }
</style>
</head>
<body>

<header><h1>Suri Cosméticos</h1></header>

<nav>
  <button class="tab-btn active" data-tab="produtos">Produtos</button>
  <button class="tab-btn" data-tab="clientes">Clientes</button>
  <button class="tab-btn" data-tab="entrada">Entrada</button>
  <button class="tab-btn" data-tab="vendas">Vendas</button>
</nav>

<section id="produtos" class="active">
<h2>Produtos</h2>
<div class="row">
<input type="text" id="produto-nome" placeholder="Nome do Produto">
<input type="number" id="produto-preco" placeholder="Preço (ex: 12.50)" step="0.01" min="0">
</div>
<button onclick="adicionarProduto()">Adicionar Produto</button>
<table id="produtos-tabela">
<thead><tr><th>Produto</th><th>Preço</th><th>Saldo</th><th>Ações</th></tr></thead>
<tbody></tbody>
</table>
</section>

<section id="clientes">
<h2>Clientes</h2>
<div class="row">
<input type="text" id="cliente-nome" placeholder="Nome do Cliente">
<input type="text" id="cliente-telefone" placeholder="Telefone (ex: (11) 99999-9999)">
</div>
<button onclick="adicionarCliente()">Adicionar Cliente</button>
<table id="clientes-tabela">
<thead><tr><th>Cliente</th><th>Telefone</th><th>Ações</th></tr></thead>
<tbody></tbody>
</table>
</section>

<section id="entrada">
<h2>Entrada de Produtos</h2>
<div class="row">
<select id="entrada-produto"></select>
<input type="number" id="entrada-quantidade" placeholder="Quantidade" min="1" step="1">
</div>
<input type="text" id="entrada-nota" placeholder="Nota Fiscal">
<button onclick="adicionarEntrada()">Adicionar Entrada</button>
<table id="entrada-tabela">
<thead><tr><th>Produto</th><th>Quantidade</th><th>Nota Fiscal</th><th>Ações</th></tr></thead>
<tbody></tbody>
</table>
</section>

<section id="vendas">
<h2>Vendas</h2>
<div class="row">
<select id="venda-produto"></select>
<select id="venda-cliente"></select>
</div>
<div class="row">
<input type="number" id="venda-quantidade" placeholder="Quantidade" min="1" step="1">
<input type="number" id="venda-valor" placeholder="Valor Unitário (ex: 12.50)" step="0.01" min="0">
</div>
<div class="row">
<input type="number" id="venda-parcelas" placeholder="Número de parcelas" min="1" step="1" value="1">
<input type="date" id="venda-data">
<button onclick="adicionarVenda()" class="small">Registrar Venda</button>
</div>

<div class="filtro-btns">
<button onclick="filtrarVendas('todos')">Todos</button>
<button onclick="filtrarVendas('aberto')">Abertos</button>
<button onclick="filtrarVendas('pago')">Pagos</button>
</div>

<table id="vendas-tabela">
<thead><tr><th>Produto</th><th>Cliente</th><th>Quantidade</th><th>Valor Total</th><th>Parcelas</th><th>Data</th><th>Status</th><th>Ações</th></tr></thead>
<tbody></tbody>
</table>
</section>

<script>
const tabs = document.querySelectorAll('.tab-btn');
const sections = document.querySelectorAll('section');
tabs.forEach(tab=>{
  tab.addEventListener('click',()=>{
    tabs.forEach(t=>t.classList.remove('active'));
    tab.classList.add('active');
    sections.forEach(sec=>sec.classList.remove('active'));
    document.getElementById(tab.dataset.tab).classList.add('active');
    atualizarSelects();
  });
});

let produtos=[], clientes=[], entradas=[], vendas=[], filtroAtual='todos';

function criarBotaoAcao(texto, classe, callback){
  const btn=document.createElement('button'); btn.textContent=texto; btn.className='action-btn '+classe; btn.onclick=callback; return btn;
}

/* Produtos */
function adicionarProduto(){
  const nome=document.getElementById('produto-nome').value.trim();
  const preco=parseFloat(document.getElementById('produto-preco').value);
  if(!nome||isNaN(preco)) return alert('Preencha nome e preço válidos.');
  produtos.push({nome, preco, saldo:0});
  document.getElementById('produto-nome').value=''; document.getElementById('produto-preco').value='';
  atualizarProdutos(); atualizarSelects();
}

function atualizarProdutos(){
  const tbody=document.querySelector('#produtos-tabela tbody'); tbody.innerHTML='';
  produtos.forEach((p,i)=>{
    const tr=document.createElement('tr'); tr.innerHTML=`<td>${p.nome}</td><td>${p.preco.toFixed(2)}</td><td>${p.saldo}</td>`;
    const tdAcoes=document.createElement('td');
    tdAcoes.appendChild(criarBotaoAcao('Alterar','btn-alterar',()=>alterarProduto(i)));
    tdAcoes.appendChild(criarBotaoAcao('Excluir','btn-excluir',()=>excluirProduto(i)));
    tr.appendChild(tdAcoes); tbody.appendChild(tr);
  });
}

function alterarProduto(index){
  const senha=prompt('Digite a senha para alterar:'); if(senha!=='1234') return alert('Senha incorreta');
  const produtoAntigo=produtos[index].nome;
  const nome=prompt('Novo nome',produtos[index].nome);
  const precoStr=prompt('Novo preço',produtos[index].preco.toFixed(2));
  const preco=parseFloat(precoStr); if(!nome||isNaN(preco)) return alert('Nome ou preço inválidos');
  produtos[index].nome=nome; produtos[index].preco=preco;
  entradas.forEach(e=>{if(e.produto===produtoAntigo)e.produto=nome;});
  vendas.forEach(v=>{if(v.produto===produtoAntigo)v.produto=nome;});
  atualizarProdutos(); atualizarEntradas(); atualizarVendas(); atualizarSelects();
}

function excluirProduto(index){
  const senha=prompt('Digite a senha para excluir:'); if(senha!=='1234') return alert('Senha incorreta');
  const nomeRemovido=produtos[index].nome;
  entradas=entradas.filter(e=>e.produto!==nomeRemovido);
  vendas=vendas.filter(v=>v.produto!==nomeRemovido);
  produtos.splice(index,1);
  atualizarProdutos(); atualizarEntradas(); atualizarVendas(); atualizarSelects();
}

/* Clientes */
function adicionarCliente(){
  const nome=document.getElementById('cliente-nome').value.trim();
  const telefone=document.getElementById('cliente-telefone').value.trim();
  if(!nome) return alert('Preencha o nome do cliente.');
  clientes.push({nome, telefone});
  document.getElementById('cliente-nome').value=''; document.getElementById('cliente-telefone').value='';
  atualizarClientes(); atualizarSelects();
}

function atualizarClientes(){
  const tbody=document.querySelector('#clientes-tabela tbody'); tbody.innerHTML='';
  clientes.forEach((c,i)=>{
    const tr=document.createElement('tr'); tr.innerHTML=`<td>${c.nome}</td><td>${c.telefone||''}</td>`;
    const tdAcoes=document.createElement('td');
    tdAcoes.appendChild(criarBotaoAcao('Alterar','btn-alterar',()=>alterarCliente(i)));
    tdAcoes.appendChild(criarBotaoAcao('Excluir','btn-excluir',()=>excluirCliente(i)));
    tr.appendChild(tdAcoes); tbody.appendChild(tr);
  });
}

function alterarCliente(index){
  const senha=prompt('Digite a senha para alterar:'); if(senha!=='1234') return alert('Senha incorreta');
  const clienteAntigo=clientes[index].nome;
  const nome=prompt('Novo nome',clientes[index].nome);
  const telefone=prompt('Novo telefone',clientes[index].telefone||'');
  if(!nome) return alert('Nome inválido');
  clientes[index].nome=nome; clientes[index].telefone=telefone;
  vendas.forEach(v=>{if(v.cliente===clienteAntigo)v.cliente=nome;});
  atualizarClientes(); atualizarVendas(); atualizarSelects();
}

function excluirCliente(index){
  const senha=prompt('Digite a senha para excluir:'); if(senha!=='1234') return alert('Senha incorreta');
  const nomeRemovido=clientes[index].nome;
  vendas=vendas.filter(v=>v.cliente!==nomeRemovido);
  clientes.splice(index,1);
  atualizarClientes(); atualizarVendas(); atualizarSelects();
}

/* Entradas */
function adicionarEntrada(){
  const produtoIndex=document.getElementById('entrada-produto').value;
  const quantidade=parseInt(document.getElementById('entrada-quantidade').value);
  const nota=document.getElementById('entrada-nota').value.trim();
  if(produtoIndex===''||isNaN(quantidade)||quantidade<=0||!nota) return alert('Preencha todos os campos da entrada corretamente.');
  const produto=produtos[produtoIndex]; produto.saldo+=quantidade;
  entradas.push({produto:produto.nome, quantidade, nota});
  document.getElementById('entrada-quantidade').value=''; document.getElementById('entrada-nota').value='';
  atualizarEntradas(); atualizarProdutos(); atualizarSelects();
}

function atualizarEntradas(){
  const tbody=document.querySelector('#entrada-tabela tbody'); tbody.innerHTML='';
  entradas.forEach((e,i)=>{
    const tr=document.createElement('tr'); tr.innerHTML=`<td>${e.produto}</td><td>${e.quantidade}</td><td>${e.nota}</td>`;
    const tdAcoes=document.createElement('td');
    tdAcoes.appendChild(criarBotaoAcao('Alterar','btn-alterar',()=>alterarEntrada(i)));
    tdAcoes.appendChild(criarBotaoAcao('Excluir','btn-excluir',()=>excluirEntrada(i)));
    tr.appendChild(tdAcoes); tbody.appendChild(tr);
  });
}

function alterarEntrada(index){
  const senha=prompt('Digite a senha para alterar:'); if(senha!=='1234') return alert('Senha incorreta');
  const entrada=entradas[index];
  const quantidadeNova=parseInt(prompt('Nova quantidade',entrada.quantidade));
  const notaNova=prompt('Nova nota fiscal',entrada.nota);
  if(isNaN(quantidadeNova)||quantidadeNova<=0||!notaNova) return alert('Quantidade ou nota inválida');
  const produto=produtos.find(p=>p.nome===entrada.produto);
  if(produto){ produto.saldo-=entrada.quantidade; produto.saldo+=quantidadeNova; }
  entrada.quantidade=quantidadeNova; entrada.nota=notaNova; atualizarEntradas(); atualizarProdutos();
}

function excluirEntrada(index){
  const senha=prompt('Digite a senha para excluir:'); if(senha!=='1234') return alert('Senha incorreta');
  const entrada=entradas[index]; const produto=produtos.find(p=>p.nome===entrada.produto);
  if(produto) produto.saldo-=entrada.quantidade;
  entradas.splice(index,1); atualizarEntradas(); atualizarProdutos();
}

/* Vendas */
function adicionarVenda(){
  const produtoIndex=document.getElementById('venda-produto').value;
  const clienteIndex=document.getElementById('venda-cliente').value;
  const quantidade=parseInt(document.getElementById('venda-quantidade').value);
  const valor=parseFloat(document.getElementById('venda-valor').value);
  const parcelas=parseInt(document.getElementById('venda-parcelas').value)||1;
  const dataVenda=document.getElementById('venda-data').value;
  if(produtoIndex===''||clienteIndex===''||isNaN(quantidade)||isNaN(valor)||quantidade<=0||valor<0||parcelas<=0||!dataVenda) return alert('Preencha todos os campos da venda corretamente.');
  const produto=produtos[produtoIndex]; if(!produto) return alert('Produto inválido.');
  if(quantidade>produto.saldo) return alert('Quantidade maior que o saldo disponível.');
  produto.saldo-=quantidade;
  const cliente=clientes[clienteIndex]||{nome:'---',telefone:''};
  vendas.push({produto:produto.nome, cliente:cliente.nome, quantidade, valorUnit:valor, valorTotal:quantidade*valor, parcelas, data:dataVenda, status:'aberto'});
  document.getElementById('venda-quantidade').value=''; document.getElementById('venda-valor').value=''; document.getElementById('venda-parcelas').value='1'; document.getElementById('venda-data').value='';
  atualizarVendas(); atualizarProdutos(); atualizarSelects();
}

function atualizarVendas(){
  const tbody=document.querySelector('#vendas-tabela tbody'); tbody.innerHTML='';
  vendas.forEach((v,i)=>{
    if(filtroAtual!=='todos' && v.status!==filtroAtual) return;
    const tr=document.createElement('tr'); 
    tr.innerHTML=`<td>${v.produto}</td><td>${v.cliente}</td><td>${v.quantidade}</td><td>${v.valorTotal.toFixed(2)}</td><td>${v.parcelas}</td><td>${v.data}</td>`;
    const tdStatus=document.createElement('td');
    const btnStatus=document.createElement('button');
    btnStatus.className='btn-status';
    btnStatus.textContent=v.status==='pago'?'Pago':'Aberto';
    btnStatus.style.backgroundColor=v.status==='pago'?'green':'red';
    btnStatus.onclick=()=>{ v.status=v.status==='pago'?'aberto':'pago'; atualizarVendas(); };
    tdStatus.appendChild(btnStatus);
    const tdAcoes=document.createElement('td');
    tdAcoes.appendChild(criarBotaoAcao('Alterar','btn-alterar',()=>alterarVenda(i)));
    tdAcoes.appendChild(criarBotaoAcao('Excluir','btn-excluir',()=>excluirVenda(i)));
    tr.appendChild(tdStatus); tr.appendChild(tdAcoes); tbody.appendChild(tr);
  });
}

function filtrarVendas(tipo){ filtroAtual=tipo; atualizarVendas(); }

function alterarVenda(index){
  const senha=prompt('Digite a senha para alterar:'); if(senha!=='1234') return alert('Senha incorreta');
  const venda=vendas[index]; const produto=produtos.find(p=>p.nome===venda.produto);
  const quantidade=parseInt(prompt('Nova quantidade',venda.quantidade));
  const parcelas=parseInt(prompt('Novo número de parcelas',venda.parcelas));
  const dataVenda=prompt('Nova data da venda',venda.data);
  if(produto){ produto.saldo+=venda.quantidade; if(quantidade>produto.saldo) return alert('Quantidade maior que saldo disponível'); produto.saldo-=quantidade; }
  if(isNaN(quantidade)||quantidade<=0||isNaN(parcelas)||parcelas<=0||!dataVenda) return alert('Valores inválidos');
  venda.quantidade=quantidade; venda.parcelas=parcelas; venda.data=dataVenda; venda.valorTotal=quantidade*venda.valorUnit;
  atualizarVendas(); atualizarProdutos();
}

function excluirVenda(index){
  const senha=prompt('Digite a senha para excluir:'); if(senha!=='1234') return alert('Senha incorreta');
  const venda=vendas[index]; const produto=produtos.find(p=>p.nome===venda.produto); if(produto) produto.saldo+=venda.quantidade;
  vendas.splice(index,1); atualizarVendas(); atualizarProdutos();
}

function atualizarSelects(){
  const prodEntrada=document.getElementById('entrada-produto'); const prodVenda=document.getElementById('venda-produto'); const clienteSelect=document.getElementById('venda-cliente');
  prodEntrada.innerHTML=''; prodVenda.innerHTML=''; clienteSelect.innerHTML='';
  produtos.forEach((p,i)=>{ const o1=document.createElement('option'); o1.value=i; o1.textContent=p.nome; prodEntrada.appendChild(o1); const o2=document.createElement('option'); o2.value=i; o2.textContent=p.nome; prodVenda.appendChild(o2); });
  clientes.forEach((c,i)=>{ const o=document.createElement('option'); o.value=i; o.textContent=c.nome; clienteSelect.appendChild(o); });
}
</script>
</body>
</html>
